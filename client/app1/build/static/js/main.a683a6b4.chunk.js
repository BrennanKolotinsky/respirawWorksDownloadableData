(this.webpackJsonpapp1=this.webpackJsonpapp1||[]).push([[0],{36:function(e,t,n){},56:function(e,t,n){},59:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(28),s=n.n(r),o=(n(36),n(7)),i=n.n(o),l=n(9),u=n(11),j=n(15),d=n.n(j),b="localhost:3000"===window.location.host?"http://localhost:8080":"",f=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b+"/get-mongo-data/file-names",e.next=3,d()({method:"GET",url:t,crossDomain:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(b,"/get-mongo-data/download-file?fileName=").concat(t),e.next=3,d()({method:"GET",url:n,crossDomain:!0,data:{fileName:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var c,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(b,"/get-mongo-data/upload-file"),(a=new FormData).append("file",t),e.next=5,fetch(c,{method:"POST",body:a,crossDomain:!0}).then((function(e){return e.json()}));case 5:r=e.sent,alert(JSON.stringify(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=(n(56),n(29)),O=(n(57),n(0)),x=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),o=Object(u.a)(s,2),j=o[0],d=o[1];Object(c.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,r(!0),d(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.fileNames);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b=j.map((function(e,t){return Object(O.jsxs)("div",{className:"",children:[0===t?Object(O.jsxs)("div",{className:"row border mt-4",children:[Object(O.jsx)("p",{className:"col-2 mt-3",children:Object(O.jsx)("strong",{children:"Index:"})}),Object(O.jsxs)("p",{className:"col-4 my-auto",children:[Object(O.jsx)("i",{className:"fa fa-file"}),Object(O.jsx)("strong",{children:" Filename:"})]}),Object(O.jsxs)("p",{className:"col-4 my-auto",children:[Object(O.jsx)("i",{className:"fa fa-download"}),Object(O.jsx)("strong",{children:" Download:"})]}),Object(O.jsxs)("p",{className:"col-2 my-auto",children:[Object(O.jsx)("i",{className:"fa fa-external-link"}),Object(O.jsx)("strong",{children:" URL:"})]})]}):null,Object(O.jsxs)("div",{className:"row border",children:[Object(O.jsx)("p",{className:"col-2 mt-3",children:t+1}),Object(O.jsx)("p",{className:"col-4 mt-3 text-break",children:e}),Object(O.jsx)("div",{className:"col-2 my-auto mx-auto",children:Object(O.jsx)("button",{className:"btn btn-primary",onClick:function(){return h(e,!0)},children:"JSON"})}),Object(O.jsx)("div",{className:"col-2 my-auto mx-auto",children:Object(O.jsx)("button",{className:"btn btn-secondary",onClick:function(){return h(e,!1)},children:"CSV"})}),Object(O.jsx)("p",{className:"col-2 my-auto",children:Object(O.jsx)("a",{href:"http://ventmon.coslabs.com/breath_plot?raworks=https://respiraworks-download-data.herokuapp.com/get-mongo-data/get-file?fileName=".concat(e),children:"Link"})})]},t),t+1===j.length?Object(O.jsxs)("div",{className:"row border",children:[Object(O.jsx)("p",{className:"col-2 mt-3",children:t+2}),Object(O.jsx)("p",{className:"col-4 my-auto",children:Object(O.jsx)("strong",{children:"All Files"})}),Object(O.jsx)("button",{className:"btn btn-success col-4 my-auto download-button mx-auto",onClick:function(){return x()},children:"DOWNLOAD ALL (CSV)"}),Object(O.jsx)("p",{className:"col-2"})]}):null]},t)})),h=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c,a,r,s,o,l,u,j,d,b=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(b.length>1&&void 0!==b[1])||b[1],e.next=3,m(t);case 3:c=e.sent,a=null===c||void 0===c?void 0:c.data,r=a.file,s=t.split(".")[0]+(n?".json":".csv"),o=null,n?o=new Blob([JSON.stringify(r)],{type:"application/json",name:s}):(l=null===r||void 0===r?void 0:r.data,u=Object.keys(l[0]),j=function(e,t){return null===t?"":t},(d=l.map((function(e){return u.map((function(t){return JSON.stringify(e[t],j)})).join(",")}))).unshift(u.join(",")),d=d.join("\r\n"),o=new Blob([d],{type:"text/csv",name:s})),Object(p.saveAs)(o,s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){j.forEach((function(e){return h(e,!1)}))};return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"container max-width-600 mb-4",children:[Object(O.jsx)("h2",{className:"mt-4",children:"Downloadable Test Data:"}),a?b:Object(O.jsx)("center",{children:Object(O.jsx)("i",{className:"fa fa-spinner fa-spin fa-5x mt-5"})})]})})},v=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(null),o=Object(u.a)(s,2),i=o[0],l=o[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Upload a file!!"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"file",onChange:function(e){if(0!==e.target.files.length){var t=e.target.files[0];l(t.name),r(t)}},accept:"application/json"}),Object(O.jsx)("button",{onClick:function(){null!==a&&(console.log("Uploading!",a,i),h(a,i))},children:"Upload!"})]})]})},N=(n(59),n(30)),g=n(2);function w(){return Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{children:Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{path:"/upload-file",children:Object(O.jsx)(v,{})}),Object(O.jsx)(g.a,{path:"/",children:Object(O.jsx)(x,{})})]})})})}var y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),y()}},[[64,1,2]]]);
//# sourceMappingURL=main.a683a6b4.chunk.js.map